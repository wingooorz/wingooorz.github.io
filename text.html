<!doctype>
<html>
<head>
	<link href="css2.css" rel="stylesheet" type="text/css">
	<script src="js/jquery-1.7.2.min.js" type="text/javascript"></script>
	<script src="js/StackBlur.js" type="text/javascript"></script>
</head>
<body>
<img src='images/bg9.jpg'  id='BgImg' />
	<div id='main'>
	</div>
	<canvas id='canvas' ></canvas>
</body>
<script>
//拖动
function change(obj,moves) 
{
		moves.onmousedown=function(ev)
		{	
			
			var disx=0;
			var disy=0;
			var oev=ev||event;
			
			disx=oev.clientX-obj.offsetLeft;
			disy=oev.clientY-obj.offsetTop;
			document.onmousemove=function(ev)
			{


				var oev=ev||event;
				var l=oev.clientX-disx; //DIV x轴位置
				var t=oev.clientY-disy;	//DIV y轴位置
				if(l<0)
				{
					l=0;
				}  
				else if(l>document.documentElement.clientWidth-obj.offsetWidth)
				{
					l=document.documentElement.clientWidth-obj.offsetWidth;
				}
				if(t<0)
				{
					t=0;
				}




				obj.style.left=l+"px";
				obj.style.top=t+"px";
				Blur();
			}


			document.onmouseup=function()
			{
				Blur();
				document.onmousemove=null;
				document.onmouseup=null;


			}
			return false; //组织默认事件 
		}
			






}
function Blur(){
		
		stackBlurImage( 'BgImg', 'canvas', 32,'main' );
}
window.onload=function(){
	
	var aa = document.getElementById("canvas");
	var bb = document.getElementById("main");
	change(bb,bb);


}
	
</script>
</html>
<pre name="code" class="html">